[{"path":"https://usaid-mozambique.github.io/sonata/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 sonata authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://usaid-mozambique.github.io/sonata/articles/analisar-transicao-etaria.html","id":"anexar-pacotes","dir":"Articles","previous_headings":"","what":"Anexar pacotes","title":"Detectar Transição Etária","text":"Como sempre, iniciaremos o trabalho carregando os pacotes requiridos ambiente R.","code":"library(sonata) library(glamr) library(tidyverse)  # Se preciso, instale o `glamr` com código abaixo # install.packages('glamr', repos = c('https://usaid-oha-si.r-universe.dev', 'https://cloud.r-project.org'))"},{"path":"https://usaid-mozambique.github.io/sonata/articles/analisar-transicao-etaria.html","id":"estabelecer-conexão","dir":"Articles","previous_headings":"","what":"Estabelecer conexão","title":"Detectar Transição Etária","text":"O código abaixo carrega credenciais MozART 2.0 seguramente ambiente R e, por outro lado, estabelece uma conexão com base de dados. Para uma descrição completa armazenamento e chamada de credenciais encriptadas, veja Uso Seguro de Credenciais MozART 2.0","code":"# Definir valor do usuário acct_dev <- \"mysql-example-user\"  # Carregar credenciais acct_db <- get_account(name = acct_dev)  # Criar uma ligação MozART 2.0 con <- mysql_connection(   db_name = acct_db$dbname,    db_user = acct_db$username,   db_pass = acct_db$password,    db_host = acct_db$host,    db_port = acct_db$port   )"},{"path":"https://usaid-mozambique.github.io/sonata/articles/analisar-transicao-etaria.html","id":"chamar-população-de-base","dir":"Articles","previous_headings":"","what":"Chamar população de base","title":"Detectar Transição Etária","text":"Depois de estabelecer nossa ligação à base de dados, vamos consultar o MozART 2.0 para obter dados utilizar na nossa análise. Neste exemplo, vamos executar função calc_tx_new para ter os clientes que iniciaram TARV entre Julho e Setembro de 2024 em uma unidade sanitária.","code":"# Executar `calc_tx_new` com os seus argumentos df <- calc_tx_new(con,                   opendate = \"2024-06-21\",                   enddate = \"2024-09-20\",                   filter_by_location = TRUE,                   location_uuid = location_meripo                   )"},{"path":"https://usaid-mozambique.github.io/sonata/articles/analisar-transicao-etaria.html","id":"projectar-idade-individual","dir":"Articles","previous_headings":"","what":"Projectar idade individual","title":"Detectar Transição Etária","text":"Podemos agora utilizar função project_age_out para projetar idades dos nossos clientes até uma data final definida. É necessário que os dados em que esta função é executada tenham “data de nascimento” cliente.","code":"# Executar `project_age_out` utilizando o argumento `ref_date` para indicar a data para a qual a idade será projectada. df <- df |>   project_age_out(ref_date = \"2026-09-20\")"},{"path":"https://usaid-mozambique.github.io/sonata/articles/analisar-transicao-etaria.html","id":"analisar-transição-etária","dir":"Articles","previous_headings":"","what":"Analisar transição etária","title":"Detectar Transição Etária","text":"Os dados retornados por project_client_age estão prontos para serem analisados. Note-se que foram incluídas duas colunas para assinalar os indivíduos que transitam de - 1) categorias de idade pediátrica para adulta; e 2) entre faixas etárias de 5 anos.","code":""},{"path":"https://usaid-mozambique.github.io/sonata/articles/chamar-activos-e-recodificar.html","id":"anexar-pacotes","dir":"Articles","previous_headings":"","what":"Anexar pacotes","title":"Cálculo dos Activos em TARV","text":"Primeiro, anexaremos os pacotes requiridos para chamada e manipulação dos dados de MozART 2.0.","code":"library(sonata) library(glamr) library(tidyverse)  # Se preciso, instale o `glamr` com código abaixo # install.packages('glamr', repos = c('https://usaid-oha-si.r-universe.dev', 'https://cloud.r-project.org'))"},{"path":"https://usaid-mozambique.github.io/sonata/articles/chamar-activos-e-recodificar.html","id":"estabelecer-conexão","dir":"Articles","previous_headings":"","what":"Estabelecer conexão","title":"Cálculo dos Activos em TARV","text":"Como descrito artigo Uso Seguro de Credenciais MozART 2.0 é recomendado carregar ambiente R suas credenciais partir sistema operativo. Isto evita elas estarem seu script e por sua vez partilha não intencional desta informação sensível. O código abaixo mostra como carregar credenciais MozART 2.0 seguramente e estabelecer uma conexão com base de dados.","code":"# Definir valor do usuário acct_dev <- \"mysql-example-user\"  # Carregar credenciais acct_db <- get_account(name = acct_dev)  # Criar uma ligação MozART 2.0 con <- mysql_connection(   db_name = acct_db$dbname,    db_user = acct_db$username,   db_pass = acct_db$password,    db_host = acct_db$host,    db_port = acct_db$port   )"},{"path":"https://usaid-mozambique.github.io/sonata/articles/chamar-activos-e-recodificar.html","id":"chamar-activos-em-tarv","dir":"Articles","previous_headings":"","what":"Chamar “Activos em TARV”","title":"Cálculo dos Activos em TARV","text":"MozART 2.0 é composta por uma série de tabelas de dados ligadas entre si por chaves variáveis. Esta organização de dados, embora óptima para eficiência armazenamento, torna mais complexa tarefa de criar conjuntos de dados analíticos. O pacote sonata foi concebido para fornecer aos analistas um conjunto de funções fáceis de utilizar que reduzem necessidade de escrever ou adaptar chamadas R e SQL. calc_tx_active, que calcula e extrai uma lista de pacientes activos em TARV, é um exemplo de uma função oferecido sonata. Um caso de uso típico é demonstrado como parte deste artigo. calc_tx_active traz 5 argumentos. 2 destes argumentos vêm sem valores predefinidos e requerem definição pelo utilizador, 3 argumentos têm valores pré-defindo que são modificáveis de acordo com necessidades da analista. O primeiro argumento requerido, “con”, é ligação ao MozART 2.0 aberto ambiente R (exemplo abaixo também definido como “con”). O segundo argumento obrigatório, “enddate”, exige o fecho período de avaliação, que será utilizado como referência para calcular os activos em TARV. O terceiro argumento, “defaulter_tolerance”, dá opção de definir um valor custimizado para o número de dias antes de um faltoso ser reclassificado como inactivo (ou “abandono”). O valor predefinido para este argumento é “28” de acordo com diretrizes da OMS. O quarto e o quinto argumentos (“filter_by_location” e “location_uuid”) são argumentos que permitem que o query seja executado sobre dados de uma unidade sanitária individual em vez de todas mais de 600 unidades sanitárias que contribuem com dados para o MozART 2.0. Na prática, estes argumentos são usados para testar código numa conexão activa, uma vez que os resultados são devolvidos mais rápido. Quando filter_by_location é definido como “TRUE”, o query será adequado para ser executada numa única base de dados definida pelo utilizador argumento “location_uuid”. Observe abaixo que o location_uuid está definido como “e5f01eee-2392-49b4-a5bf-5cf593fc8f21”, que é o identificador da CS Merripo.","code":"# Definir location_uuid para a CS Merripo location_meripo <- \"e5f01eee-2392-49b4-a5bf-5cf593fc8f21\"  # Chamar `calc_tx_active` df <- calc_tx_active(   con = con,   enddate = '2024-09-20',   defaulter_tolerance = 28, # valor por defeito   filter_by_location = TRUE,  # valor por defeito   location_uuid = location_meripo  # valor por defeito )"},{"path":"https://usaid-mozambique.github.io/sonata/articles/chamar-activos-e-recodificar.html","id":"recodificar-variáveis","dir":"Articles","previous_headings":"","what":"Recodificar variáveis","title":"Cálculo dos Activos em TARV","text":"Quando devolvido, pode inspecionar os resultados da sua consulta com função view tidyverse. Observe que os valores retornados para várias colunas são codificados numericamente e não fornecem explicitamente ao analista informações suficientes para interpretação. Podemos usar função recode_cols com seus argumentos correspondentes para recodificar esses valores. O recode_cols utiliza tabelas de pesquisa MozART 2.0 armazenadas internamente sonata para mapear os valores colunares descodificados para um conjunto de variáveis definido pelo utilizador. exemplo abaixo, chamamos recode_cols e o argumento columns_to_recode para descodificar os valores apresentados em 5 colunas objecto df que geramos com calc_tx_active. Estas são: “mode_dispensation_id”, “regimen_id”, “location_uuid”, “age”, “form_id” e “gender”. O argumento columns_to_recode pode ser adaptado de acordo com colunas presentes objeto de dados de entrada. Por exemplo, se só estiverem presentes “idade” e “sexo”, o utilizador só forneceria estes dois valores argumento. Utilizando apenas algumas funções sonata, criámos um conjunto de dados que pode ser utilizado para responder à nossa questão analítica, seja ela qual . Finalmente, lembre-se de nunca salvar conjuntos de dados de nível individual seu disco local! Em vez disso, agrupe os valores por todas caraterísticas de dados relevantes e guarde-os como um conjunto de dados agregado. Boa análise!","code":"df_recode <- df |>    recode_cols(     columns_to_recode = c(\"mode_dispensation_id\",                            \"regimen_id\",                            \"location_uuid\",                            \"age\",                            \"form_id\",                           \"gender\")   )"},{"path":"https://usaid-mozambique.github.io/sonata/articles/definir-credenciais.html","id":"carregar-dependências-de-pacotes","dir":"Articles","previous_headings":"","what":"Carregar dependências de pacotes","title":"Uso Seguro de Credenciais MozART 2.0","text":"Começaremos o trabalho anexando os pacotes necessários que o fluxo de trabalho exigirá. Estes incluem o pacote sonata e o pacote utilitário glamr da USAID.","code":"library(sonata) library(glamr)  # Se necessário, instale o `glamr` a partir do código abaixo # install.packages('glamr', repos = c('https://usaid-oha-si.r-universe.dev', 'https://cloud.r-project.org'))"},{"path":"https://usaid-mozambique.github.io/sonata/articles/definir-credenciais.html","id":"definir-credenciais-no-sistema-operativo-local","dir":"Articles","previous_headings":"","what":"Definir credenciais no sistema operativo local","title":"Uso Seguro de Credenciais MozART 2.0","text":"bloco de código abaixo, criaremos um valor de usuário (definido como “acct_dev”) e, em seguida, passaremos esse valor de usuário para o segundo bloco de código que iniciará ferramentas internas RStudio para guardar credenciais sistema operacional da máquina usuário. Ao executar função set_account, o usuário será solicitado definir o host MozART 2.0, porta, nome de usuário, senha e dbname. Uma vez definidas, essas credenciais podem ser carregadas na sessão RStudio sem serem visíveis código projeto. Esta abordagem minimiza possibilidade de partilha não intencional.","code":"# Definir um valor de usuário acct_dev <- \"mysql-example-user\"  # Definir credenciais no sistema operativo local set_account(name = acct_dev,              keys = c(\"host\", \"port\", \"username\", \"password\", \"dbname\"),              update = TRUE)  # Carregar credenciais acct_db <- get_account(name = acct_dev)"},{"path":"https://usaid-mozambique.github.io/sonata/articles/definir-credenciais.html","id":"carregar-credenciais-e-criar-uma-ligação-mozart-2-0","dir":"Articles","previous_headings":"","what":"Carregar credenciais e criar uma ligação MozART 2.0","title":"Uso Seguro de Credenciais MozART 2.0","text":"Tendo nossas credenciais encriptadas e guardadas na máquina local, iremos chamá-las de forma segura para o nosso ambiente R usando função get_account. De daí, utilizá-los-emos para estabelecer nossa conexão ao MozART 2.0. Parabéns! Você acaba de estebelecer um sistema seguro e eficiente para guardar e usar credenciais de MozART 2.0!","code":"# Definir valor do usuário acct_dev <- \"mysql-example-user\"  # Carregar credenciais acct_db <- get_account(name = acct_dev)  # Criar uma ligação MozART 2.0 con <- mysql_connection(   db_name = acct_db$dbname,    db_user = acct_db$username,   db_pass = acct_db$password,    db_host = acct_db$host,    db_port = acct_db$port   )"},{"path":"https://usaid-mozambique.github.io/sonata/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Joe Lara. Author, maintainer. Karishma Srikanth. Author. Baboyma Kagniniwa. Author. Timothy Essam. Author.","code":""},{"path":"https://usaid-mozambique.github.io/sonata/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Lara J, Srikanth K, Kagniniwa B, Essam T (2025). sonata: Interagir com Dados MozART 2.0. R package version 1.0.0, https://usaid-mozambique.github.io/sonata/.","code":"@Manual{,   title = {sonata: Interagir com Dados do MozART 2.0},   author = {Joe Lara and Karishma Srikanth and Baboyma Kagniniwa and Timothy Essam},   year = {2025},   note = {R package version 1.0.0},   url = {https://usaid-mozambique.github.io/sonata/}, }"},{"path":"https://usaid-mozambique.github.io/sonata/index.html","id":"sonata-","dir":"","previous_headings":"","what":"Interagir com Dados do MozART 2.0","title":"Interagir com Dados do MozART 2.0","text":"Interagir com dados MozART 2.0","code":""},{"path":"https://usaid-mozambique.github.io/sonata/index.html","id":"instalação","dir":"","previous_headings":"","what":"Instalação","title":"Interagir com Dados do MozART 2.0","text":"sonata não está CRAN, então você terá que instalá-lo diretamente rOpenSci usando o código abaixo. Disclaimer: findings, interpretation, conclusions expressed herein authors necessarily reflect views United States Agency International Development. errors remain .","code":"# instalar via rOpenSci       install.packages(\"sonata\",                          repos = c('https://usaid-mozambique.r-universe.dev',                          'https://cloud.r-project.org'))          # Anexar pacote       library(sonata)            # Listar funções do pacote       ls(\"package::sonata\")"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_age_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Calcular a idade do cliente — calc_age_var","title":"Calcular a idade do cliente — calc_age_var","text":"Calcular idade cliente","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_age_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calcular a idade do cliente — calc_age_var","text":"","code":"calc_age_var(   df,   birth_date = \"birthdate\",   ref_date = Sys.Date(),   variable_name = \"age\" )"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_age_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calcular a idade do cliente — calc_age_var","text":"df Quadro de dados contendo data de nasicmento cliente birth_date Coluna quadro de dados utilizada para introduzir data de nascimento cliente (default = birthdate) ref_date Data de referência para calcular idade cliente (default = Sys.Date()) variable_name Nome da variável que será criada quadro de dados com idade cliente em anos (default = 'age')","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_age_var.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calcular a idade do cliente — calc_age_var","text":"Quadro de dados com idade cliente em anos","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_age_var.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calcular a idade do cliente — calc_age_var","text":"","code":"if (FALSE) { # \\dontrun{   df <- calc_age_var(df)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_arv_pickups.html","id":null,"dir":"Reference","previous_headings":"","what":"Query levantamentos TARV — calc_arv_pickups","title":"Query levantamentos TARV — calc_arv_pickups","text":"calc_arv_pickups() devolve uma listagem dos levantamentos ARV feito um período especificado pelo utilizador","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_arv_pickups.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query levantamentos TARV — calc_arv_pickups","text":"","code":"calc_arv_pickups(   con,   enddate,   opendate,   arv_pickup_source = \"FILA\",   filter_by_location = FALSE,   location_uuid = \"4be5f1a9-832c-4717-be41-ef4b6311c0ef\" )"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_arv_pickups.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query levantamentos TARV — calc_arv_pickups","text":"con Ligação à base de dados MozART 2.0 enddate Data fecho período (introduzir como “AAAA-MM-DD”) opendate Data da abertura período (introduzir como “AAAA-MM-DD”) arv_pickup_source Fonte de levantamento de ARV. Opções são \"FILA\", \"Reception\", \"\". Default é \"FILA \"FILA\" por defeito, devolve levantamentos documentados na FILA ou fonte alternativa da farmácia \"Reception\" devolve levantamentos documentados na Ficha de Seguimento, Mapa dos Levantamentos \"\" devolve todos levantamentos filter_by_location FALSE por defeito TRUE executa sobre uma US específica FALSE executa sobre todas US contidas MozART 2.0 location_uuid location_uuid da US filtrar quando filter_by_location é definido como TRUE","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_arv_pickups.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query levantamentos TARV — calc_arv_pickups","text":"Um quadro de dados contendo uma listagem individual dos levantamentos TARV","code":""},{"path":[]},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_consults.html","id":null,"dir":"Reference","previous_headings":"","what":"Query consultas clínicas HIV — calc_consults","title":"Query consultas clínicas HIV — calc_consults","text":"calc_consults() devolve uma listagem das consultas clínicas HIV realizadas por um grupo de clientes definido pelo utilizador (activos em TARV ou todos clientes)","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_consults.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query consultas clínicas HIV — calc_consults","text":"","code":"calc_consults(   con,   client_status = \"All\",   defaulter_tolerance = 28,   opendate = NULL,   enddate = Sys.Date(),   filter_by_location = FALSE,   location_uuid = NULL )"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_consults.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query consultas clínicas HIV — calc_consults","text":"con Ligação à base de dados MozART 2.0 client_status Estado cliente em TARV \"\", por defeito, devolve todos clientes tendo realizado consultas clínicas \"Active\", devolve apenas os clientes activos em TARV defaulter_tolerance Número de dias de tolerância antes dos faltosos serem considerados inactivos (abandonos) \"28\" por defeito opendate Data da abertura período (introduzir como “AAAA-MM-DD”) enddate Data fecho período usado para avialar o estado activo client \"Sys.Date\" Por defeito Data customizada em formato (introduzir como “AAAA-MM-DD”) Número customizado (por exemplo \"59\" na definição de MISAU) filter_by_location Se TRUE, o query corre sobre uma unidade sanitária específica.  Se FALSE, o query corre sobre todas unidade sanitária contidas MozART 2.0 location_uuid location_uuid da unidade sanitária filtrar quando filter_by_location é definido como TRUE","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_consults.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query consultas clínicas HIV — calc_consults","text":"Um quadro de dados contendo uma listagem das consultas clínicas HIV realizadas","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_consults.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Query consultas clínicas HIV — calc_consults","text":"","code":"if (FALSE) { # \\dontrun{  # Caso de uso simples executado sobre todas US  df <- calc_consults(con)   # Caso de uso de activos, tolerância 59 dias, executado sobre uma US  df <- calc_consults(           con,           enddate = '2024-09-20',           client_status = \"Active\",           defaulter_tolerance = 59,           filter_by_location = TRUE,           location_uuid = 'e3eb1a1b-be07-4af2-9360-5d7046910576')   # Caso de uso de activos, limitando as consultas a 2022 para frente  df <- calc_consults(           con,           client_status = \"Active\",           enddate = '2024-09-20',           opendate = '2022-01-10')} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_active.html","id":null,"dir":"Reference","previous_headings":"","what":"Query clientes activos em TARV — calc_tx_active","title":"Query clientes activos em TARV — calc_tx_active","text":"Query clientes activos em TARV","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_active.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query clientes activos em TARV — calc_tx_active","text":"","code":"calc_tx_active(   con,   enddate,   defaulter_tolerance = 28,   filter_by_location = FALSE,   location_uuid = \"4be5f1a9-832c-4717-be41-ef4b6311c0ef\" )"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_active.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query clientes activos em TARV — calc_tx_active","text":"con Ligação à base de dados MozART 2.0 enddate Data de fecho período (introduzir como “AAAA-MM-DD”) defaulter_tolerance Número de dias de tolerância antes dos faltosos serem considerados inactivos (abandonos) filter_by_location Lógico. Se TRUE, o query corre sobre uma unidade sanitária específica.  Se FALSE,  o query corre sobre todas unidade sanitária contidas na base de dados location_uuid location_uuid da unidade sanitária filtrar quando filter_by_location é definido como TRUE","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_active.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query clientes activos em TARV — calc_tx_active","text":"Um quadro de dados contendo uma listagem individual dos pacientes activos em TARV","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_active.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Query clientes activos em TARV — calc_tx_active","text":"","code":"if (FALSE) { # \\dontrun{   df <- calc_tx_active(           con,           enddate = '2024-09-20',           defaulter_tolerance = 28,           filter_by_location = TRUE,           location_uuid = location_meripo)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_new.html","id":null,"dir":"Reference","previous_headings":"","what":"Query clientes iniciados em TARV — calc_tx_new","title":"Query clientes iniciados em TARV — calc_tx_new","text":"Query clientes iniciados em TARV","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_new.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query clientes iniciados em TARV — calc_tx_new","text":"","code":"calc_tx_new(   con,   opendate,   enddate,   filter_by_location = FALSE,   location_uuid = \"4be5f1a9-832c-4717-be41-ef4b6311c0ef\" )"},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_new.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query clientes iniciados em TARV — calc_tx_new","text":"con Ligação à base de dados MozART 2.0 opendate Data de abertura período (introduzir como “AAAA-MM-DD”) enddate Data de fecho período (introduzir como “AAAA-MM-DD”) filter_by_location Lógico. Se TRUE, o query corre sobre uma unidade sanitária específica.  Se FALSE,  o query corre sobre todas unidade sanitária contidas na base de dados location_uuid location_uuid da unidade sanitária filtrar quando filter_by_location é definido como TRUE","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_new.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query clientes iniciados em TARV — calc_tx_new","text":"Um quadro de dados contendo uma listagem individual dos pacientes iniciados em TARV","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/calc_tx_new.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Query clientes iniciados em TARV — calc_tx_new","text":"","code":"if (FALSE) { # \\dontrun{   df <- calc_tx_new(           con,           opendate = \"2024-06-21\",           enddate = \"2024-09-20\",           filter_by_location = TRUE,           location_uuid = location_meripo)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_location_lookup.html","id":null,"dir":"Reference","previous_headings":"","what":"Referência: location_uuid — data_location_lookup","title":"Referência: location_uuid — data_location_lookup","text":"Source: R/data.R.","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_location_lookup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Referência: location_uuid — data_location_lookup","text":"","code":"data(data_location_lookup)"},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_location_lookup.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Referência: location_uuid — data_location_lookup","text":"Quadro de dados com variáveis: location_uuid código único de identificação local datim_id Código único de identificação Datim local sisma_id Código único de identificação SISMA local province Província onde se situa o local district Distrito em que o local está situado datim_name Nome local Datim mozart_name Nome local MozART","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_observation_lookup.html","id":null,"dir":"Reference","previous_headings":"","what":"Referência: data_observation_lookup — data_observation_lookup","title":"Referência: data_observation_lookup — data_observation_lookup","text":"Source: R/data.R.","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_observation_lookup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Referência: data_observation_lookup — data_observation_lookup","text":"","code":"data(data_observation_lookup)"},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_observation_lookup.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Referência: data_observation_lookup — data_observation_lookup","text":"Quadro de dados com variáveis: concept_id Identificador conceito concept_name Nome conceito","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_type_id_lookup.html","id":null,"dir":"Reference","previous_headings":"","what":"Referência: data_type_id_lookup — data_type_id_lookup","title":"Referência: data_type_id_lookup — data_type_id_lookup","text":"Source: R/data.R.","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_type_id_lookup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Referência: data_type_id_lookup — data_type_id_lookup","text":"","code":"data(data_type_id_lookup)"},{"path":"https://usaid-mozambique.github.io/sonata/reference/data_type_id_lookup.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Referência: data_type_id_lookup — data_type_id_lookup","text":"Quadro de dados com variáveis: id id table_name Nome formulário específico (por exemplo, form) column_name Código único formulário específico (por exemplo, form_id) id_type_lookup Código numérico formulário específico (por exemplo, 60) id_type_desc Descrição formulário específico - inglês id_type_lookup_pt Descrição formulário específico - português notes Notas","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/mysql_connection.html","id":null,"dir":"Reference","previous_headings":"","what":"Ligar ao MozART 2.0 — mysql_connection","title":"Ligar ao MozART 2.0 — mysql_connection","text":"Ligar ao MozART 2.0","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/mysql_connection.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ligar ao MozART 2.0 — mysql_connection","text":"","code":"mysql_connection(   db_name,   db_user,   db_pass,   db_host = \"localhost\",   db_port = 3306 )"},{"path":"https://usaid-mozambique.github.io/sonata/reference/mysql_connection.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ligar ao MozART 2.0 — mysql_connection","text":"db_name Nome da base de dados db_user Utilizador da base de dados db_pass Senha da base de dados db_host Host da base de dados db_port Porta da base de dados","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/mysql_connection.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ligar ao MozART 2.0 — mysql_connection","text":"Uma conexão à base de dados","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/mysql_connection.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ligar ao MozART 2.0 — mysql_connection","text":"","code":"if (FALSE) { # \\dontrun{   df <- mysql_connection()} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/project_age_out.html","id":null,"dir":"Reference","previous_headings":"","what":"Detectar clients com transição etária — project_age_out","title":"Detectar clients com transição etária — project_age_out","text":"Detectar clients com transição etária","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/project_age_out.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detectar clients com transição etária — project_age_out","text":"","code":"project_age_out(df, ref_date)"},{"path":"https://usaid-mozambique.github.io/sonata/reference/project_age_out.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detectar clients com transição etária — project_age_out","text":"df Quadro de dados contendo data de nasicmento cliente ref_date Data de referência para calcular idade projectada cliente","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/project_age_out.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detectar clients com transição etária — project_age_out","text":"Quadro de dados com variáveis idade, idade projectada, faixa etária, faixa etária projectada, e colunas que indicam casos de transição etária","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/project_age_out.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Detectar clients com transição etária — project_age_out","text":"","code":"if (FALSE) { # \\dontrun{   df <- project_age_out(df)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/pull_active_uuid.html","id":null,"dir":"Reference","previous_headings":"","what":"Query vector de patient_uuids de activos no TARV — pull_active_uuid","title":"Query vector de patient_uuids de activos no TARV — pull_active_uuid","text":"Query vector de patient_uuids de activos TARV","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/pull_active_uuid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query vector de patient_uuids de activos no TARV — pull_active_uuid","text":"","code":"pull_active_uuid(   con,   enddate,   defaulter_tolerance = 28,   filter_by_location = FALSE,   location_uuid = \"4be5f1a9-832c-4717-be41-ef4b6311c0ef\" )"},{"path":"https://usaid-mozambique.github.io/sonata/reference/pull_active_uuid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query vector de patient_uuids de activos no TARV — pull_active_uuid","text":"con Ligação à base de dados MozART 2.0 enddate Data de fecho período (introduzir como “AAAA-MM-DD”) defaulter_tolerance Número de dias de tolerância antes dos faltosos serem considerados inactivos (abandonos) filter_by_location Lógico. Se TRUE, o query corre sobre uma unidade sanitária específica.  Se FALSE,  o query corre sobre todas unidade sanitária contidas na base de dados location_uuid location_uuid da unidade sanitária filtrar quando filter_by_location é definido como TRUE","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/pull_active_uuid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query vector de patient_uuids de activos no TARV — pull_active_uuid","text":"pull_active_uuid devolve um vector contendo os patient_uuid unicos dos pacientes activos em TARV","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/pull_active_uuid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Query vector de patient_uuids de activos no TARV — pull_active_uuid","text":"","code":"if (FALSE) { # \\dontrun{   df <- pull_active_uuid(           con,           enddate = '2024-09-20',           defaulter_tolerance = 28,           filter_by_location = TRUE,           location_uuid = location_meripo)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Recodificar idade — recode_age","title":"Recodificar idade — recode_age","text":"Recodificar idade","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recodificar idade — recode_age","text":"","code":"recode_age(df, age_column = \"age\", variable_name = \"age_band\")"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recodificar idade — recode_age","text":"df Quadro de dados contendo variável recodificar age_column Variável quadro de dados introduzido contendo idade cliente variable_name Nome da variável que será criada quadro de dados com faixa etária client (default = 'age_band')","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recodificar idade — recode_age","text":"recode_age devolve um quadro de dados com coluna idade recodificada","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_age.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recodificar idade — recode_age","text":"","code":"if (FALSE) { # \\dontrun{   df <- recode_age(           df = df,           age_column = \"age\")} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_cols.html","id":null,"dir":"Reference","previous_headings":"","what":"Recodificar colunas — recode_cols","title":"Recodificar colunas — recode_cols","text":"recode_cols reatribui valores para colunas codificadas em quadros de dados MozART 2.0 comuns","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_cols.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recodificar colunas — recode_cols","text":"","code":"recode_cols(   df,   cols = c(\"mode_dispensation_id\", \"regimen_id\", \"location_uuid\", \"age\", \"form_id\",     \"gender\"),   options = list(df_disp_mode = data_type_id_lookup, df_regimen = data_type_id_lookup,     df_form = data_type_id_lookup, df_location = data_location_lookup, age_column =     \"age\", sex_column = \"gender\") )"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_cols.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recodificar colunas — recode_cols","text":"df Quadro de dados contendo colunas serem recodificadas cols Vector de strings contendo os nomes das colunas recodificar options Lista de parâmetros opcionais para personalizar recodificação","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_cols.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recodificar colunas — recode_cols","text":"recode_cols devolve um quadro de dados com colunas recodificadas","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_cols.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recodificar colunas — recode_cols","text":"","code":"if (FALSE) { # \\dontrun{  # Caso de uso para recodificar dispensation_id, regimen_id e location_uuid  df <- recode_cols(           df = df,           cols = c(\"mode_dispensation_id\",                    \"regimen_id\",                    \"location_uuid\"))} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_disp_mode.html","id":null,"dir":"Reference","previous_headings":"","what":"Recodificar modo de dispensa TARV — recode_disp_mode","title":"Recodificar modo de dispensa TARV — recode_disp_mode","text":"Recodificar modo de dispensa TARV","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_disp_mode.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recodificar modo de dispensa TARV — recode_disp_mode","text":"","code":"recode_disp_mode(df, df_disp_mode = data_type_id_lookup, keep_id = FALSE)"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_disp_mode.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recodificar modo de dispensa TARV — recode_disp_mode","text":"df Quadro de dados contendo variável recodificar df_disp_mode Objecto de tabela de pesquisa usado para recodificação keep_id Manter coluna regimen_id após recodificação (Logical T/F)","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_disp_mode.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recodificar modo de dispensa TARV — recode_disp_mode","text":"recode_disp_mode devolve um quadro de dados com coluna regimen recodificada","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_disp_mode.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recodificar modo de dispensa TARV — recode_disp_mode","text":"","code":"if (FALSE) { # \\dontrun{   df <- recode_disp_mode(           df = df,           df_disp_mode = data_type_id_lookup,           keep_id = FALSE)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_form.html","id":null,"dir":"Reference","previous_headings":"","what":"Recodificar formulario primario — recode_form","title":"Recodificar formulario primario — recode_form","text":"Recodificar formulario primario","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_form.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recodificar formulario primario — recode_form","text":"","code":"recode_form(df, df_form = data_type_id_lookup, keep_id = FALSE)"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_form.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recodificar formulario primario — recode_form","text":"df Quadro de dados contendo variável recodificar df_form Objecto de tabela de pesquisa usado para recodificação keep_id Manter coluna regimen_id após recodificação (Logical T/F)","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_form.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recodificar formulario primario — recode_form","text":"recode_form devolve um quadro de dados com coluna regimen recodificada","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_form.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recodificar formulario primario — recode_form","text":"","code":"if (FALSE) { # \\dontrun{   df <- recode_form(           df = df,           df_form = data_type_id_lookup,           keep_id = FALSE)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_location.html","id":null,"dir":"Reference","previous_headings":"","what":"Recodificar location_uuid's — recode_location","title":"Recodificar location_uuid's — recode_location","text":"Recodificar location_uuid's","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_location.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recodificar location_uuid's — recode_location","text":"","code":"recode_location(df, df_location = data_location_lookup)"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_location.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recodificar location_uuid's — recode_location","text":"df Quadro de dados contendo variável recodificar df_location Objecto de tabela de pesquisa usado para recodificação","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_location.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recodificar location_uuid's — recode_location","text":"recode_location devolve um quadro de dados com coluna location_uuid recodificada","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_location.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recodificar location_uuid's — recode_location","text":"","code":"if (FALSE) { # \\dontrun{   df <- recode_location(           df = df,           df_location = data_location_lookup)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_regimen.html","id":null,"dir":"Reference","previous_headings":"","what":"Recodificar regimen TARV — recode_regimen","title":"Recodificar regimen TARV — recode_regimen","text":"Recodificar regimen TARV","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_regimen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recodificar regimen TARV — recode_regimen","text":"","code":"recode_regimen(df, df_regimen = data_type_id_lookup, keep_id = FALSE)"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_regimen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recodificar regimen TARV — recode_regimen","text":"df Quadro de dados contendo variável recodificar df_regimen Objecto de tabela de pesquisa usado para recodificação keep_id Manter coluna regimen_id após recodificação (Logical T/F)","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_regimen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recodificar regimen TARV — recode_regimen","text":"recode_regimen devolve um quadro de dados com coluna regimen recodificada","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_regimen.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recodificar regimen TARV — recode_regimen","text":"","code":"if (FALSE) { # \\dontrun{   df <- recode_regimen(           df = df,           df_regimen = data_type_id_lookup,           keep_id = FALSE)} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_sex.html","id":null,"dir":"Reference","previous_headings":"","what":"Recodificar sexo — recode_sex","title":"Recodificar sexo — recode_sex","text":"Recodificar sexo","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_sex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recodificar sexo — recode_sex","text":"","code":"recode_sex(df, sex_column = \"gender\")"},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_sex.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recodificar sexo — recode_sex","text":"df Quadro de dados contendo variável recodificar sex_column Variável quadro de dados introduzido contendo o sexo cliente","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_sex.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recodificar sexo — recode_sex","text":"recode_sex devolve um quadro de dados com coluna sexo recodificada","code":""},{"path":"https://usaid-mozambique.github.io/sonata/reference/recode_sex.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recodificar sexo — recode_sex","text":"","code":"if (FALSE) { # \\dontrun{   df <- recode_sex(           df = df,           sex_column = \"sex\")} # }"},{"path":"https://usaid-mozambique.github.io/sonata/reference/sonata-package.html","id":null,"dir":"Reference","previous_headings":"","what":"sonata: Interagir com Dados do MozART 2.0 — sonata-package","title":"sonata: Interagir com Dados do MozART 2.0 — sonata-package","text":"Provides set utilities functions connecting, querying, analyzing data Mozambique MozART 2.0 database.","code":""},{"path":[]},{"path":"https://usaid-mozambique.github.io/sonata/reference/sonata-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"sonata: Interagir com Dados do MozART 2.0 — sonata-package","text":"Maintainer: Joe Lara jlara@usaid.gov Authors: Karishma Srikanth ksrikanth@usaid.gov Baboyma Kagniniwa bkagniniwa@usaid.gov Timothy Essam tessam@usaid.gov","code":""},{"path":"https://usaid-mozambique.github.io/sonata/news/index.html","id":"sonata-100","dir":"Changelog","previous_headings":"","what":"sonata 1.0.0","title":"sonata 1.0.0","text":"actualização ciclo de vida para “stable” adição de função query calc_consultas renomeação argumento ‘columns_to_recode’ na função ‘recode_cols’ adição de função query para levantamentos ARV adição de funções de recodificação de variáveis adição de artigos","code":""},{"path":"https://usaid-mozambique.github.io/sonata/news/index.html","id":"sonata-020","dir":"Changelog","previous_headings":"","what":"sonata 0.2.0","title":"sonata 0.2.0","text":"tradução conteúdo da embalagem para português","code":""},{"path":"https://usaid-mozambique.github.io/sonata/news/index.html","id":"sonata-010","dir":"Changelog","previous_headings":"","what":"sonata 0.1.0","title":"sonata 0.1.0","text":"iniciação pacote com infraestrutura básica adição de utilidades para suportar ligação à base de dados adição de funções query para novas e activas em TARV adição logótipo sonata hexadecimal","code":""}]
